/*! bbUI VERSION: 0.9.6.131 | github.com/blackberry/bbUI.js/blob/master/LICENSE !*/bb={scroller:null,screens:[],dropdownScrollers:[],windowListeners:[],documentListeners:[],transparentPixel:"data:image/png;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",imageList:null,activityIndicator:null,fileInput:null,button:null,scrollPanel:null,bbmBubble:null,dropdown:null,textInput:null,roundPanel:null,grid:null,pillButtons:null,labelControlContainers:null,slider:null,radio:null,progress:null,checkbox:null,toggle:null,init:function(e){if(e)for(var t in e)bb.options[t]=e[t];window.blackberry&&blackberry.system&&blackberry.system.event&&blackberry.system.event.onHardwareKey&&(bb.options.onbackkey?blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.options.onbackkey):blackberry.system.event.onHardwareKey(blackberry.system.event.KEY_BACK,bb.popScreen)),bb.device.isRipple=navigator.userAgent.indexOf("Ripple")>=0||window.tinyHippos,bb.device.isPlayBook=navigator.userAgent.indexOf("PlayBook")>=0||1024==window.innerWidth&&600==window.innerHeight||600==window.innerWidth&&1024==window.innerHeight,bb.device.isBB10=bb.device.isPlayBook&&bb.options.bb10ForPlayBook?!0:navigator.userAgent.indexOf("BB10")>=0,bb.device.isBB7=navigator.userAgent.indexOf("7.0.0")>=0||navigator.userAgent.indexOf("7.1.0")>=0,bb.device.isBB6=navigator.userAgent.indexOf("6.0.0")>=0,bb.device.isBB5=navigator.userAgent.indexOf("5.0.0")>=0,bb.device.is1024x600=bb.device.isPlayBook,bb.device.is1280x768=1280==window.innerWidth&&768==window.innerHeight||768==window.innerWidth&&1280==window.innerHeight,bb.device.is720x720=720==window.innerWidth&&720==window.innerHeight,bb.device.is1280x720=1280==window.innerWidth&&720==window.innerHeight||720==window.innerWidth&&1280==window.innerHeight,bb.device.isHiRes=bb.device.isRipple?window.innerHeight>480||window.innerWidth>480:screen.width>480||screen.height>480;var t,i=document.head.querySelectorAll("meta[name=viewport]");for(t=0;i.length>t;t++)try{document.head.removeChild(i[t])}catch(n){}var o=document.createElement("meta");o.setAttribute("name","viewport"),bb.device.isBB10&&!bb.device.is1024x600?o.setAttribute("content","initial-scale="+1/window.devicePixelRatio+",user-scalable=no"):o.setAttribute("content","initial-scale=1.0,width=device-width,user-scalable=no,target-densitydpi=device-dpi"),document.head.appendChild(o);var r=parseInt(bb.cutHex(bb.options.highlightColor).substring(0,2),16),s=parseInt(bb.cutHex(bb.options.highlightColor).substring(2,4),16),l=parseInt(bb.cutHex(bb.options.highlightColor).substring(4,6),16);if(bb.options.shades={R:r,G:s,B:l,darkHighlight:"rgb("+(r-120)+", "+(s-120)+", "+(l-120)+")",mediumHighlight:"rgb("+(r-60)+", "+(s-60)+", "+(l-60)+")",darkOutline:"rgb("+(r-32)+", "+(s-32)+", "+(l-32)+")",darkDarkHighlight:"rgb("+(r-140)+", "+(s-140)+", "+(l-140)+")"},document.styleSheets&&document.styleSheets.length)try{document.styleSheets[0].insertRule(".bb10Highlight {background-color:"+bb.options.highlightColor+";background-image:none;}",0),document.styleSheets[0].insertRule(".bbProgressHighlight {background-color:#92B43B;background-image:none;}",0),document.styleSheets[0].insertRule(".bb10-button-highlight {color:White;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.shades.darkHighlight+"), to("+bb.options.highlightColor+"));border-color:#53514F;}",0),document.styleSheets[0].insertRule(".pb-button-light-highlight {color:"+bb.options.shades.darkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".pb-button-dark-highlight {color:"+bb.options.highlightColor+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10Accent {background-color:"+bb.options.shades.darkHighlight+";}",0),document.styleSheets[0].insertRule(".bb10-title-colored {color:white;text-shadow: 0px 2px black;background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.darkHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10-title-button-container-colored {color:white;text-shadow: 0px 2px black;border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0),document.styleSheets[0].insertRule(".bb10-title-button-colored {border-color: "+bb.options.shades.darkDarkHighlight+";background-image: -webkit-gradient(linear, center top, center bottom, from("+bb.options.highlightColor+"), to("+bb.options.shades.mediumHighlight+"));}",0),document.styleSheets[0].insertRule(".bb10-title-button-colored-highlight {border-color: "+bb.options.shades.darkDarkHighlight+";background-color: "+bb.options.shades.darkHighlight+";}",0)}catch(n){console.log(n.message)}bb.screen.controlColor=bb.options.controlsDark?"dark":"light",bb.screen.listColor=bb.options.listsDark?"dark":"light",bb.device.isBB10?(bb.imageList=_bb10_imageList,bb.activityIndicator=_bb10_activityIndicator,bb.fileInput=_bb10_fileInput,bb.button=_bb10_button,bb.scrollPanel=_bb_PlayBook_10_scrollPanel,bb.bbmBubble=_bb_bbmBubble,bb.dropdown=_bb10_dropdown,bb.textInput=_bb10_textInput,bb.roundPanel=_bb10_roundPanel,bb.grid=_bb10_grid,bb.pillButtons=_bb10_pillButtons,bb.labelControlContainers=_bb10_labelControlContainers,bb.slider=_bb10_slider,bb.radio=_bb10_radio,bb.progress=_bb_progress,bb.checkbox=_bb10_checkbox,bb.toggle=_bb10_toggle,bb.contextMenu=bb.device.isPlayBook||bb.device.isRipple?_PlayBook_contextMenu:_bb10_contextMenu,bb.actionOverflow=_PlayBook_contextMenu):bb.device.isBB5?(bb.imageList=_bb_5_6_7_imageList,bb.button=_bb5_button,bb.bbmBubble=_bb_bbmBubble,bb.roundPanel=_bb_5_6_7_roundPanel,bb.pillButtons=_bb5_pillButtons,bb.labelControlContainers=_bb5_labelControlContainers,bb.progress=_bb_progress):bb.device.isPlayBook?(bb.imageList=_bbPlayBook_imageList,bb.button=_bbPlayBook_button,bb.bbmBubble=_bb_bbmBubble,bb.dropdown=_bb_6_7_PlayBook_dropdown,bb.textInput=_bbPlayBook_textInput,bb.pillButtons=_bb_6_7_PlayBook_pillButtons,bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers,bb.progress=_bb_progress,bb.scrollPanel=_bb_PlayBook_10_scrollPanel,bb.roundPanel=_bbPlayBook_roundPanel,bb.activityIndicator=_bbPlayBook_activityIndicator):(bb.imageList=_bb_5_6_7_imageList,bb.button=_bb_6_7_button,bb.bbmBubble=_bb_bbmBubble,bb.dropdown=_bb_6_7_PlayBook_dropdown,bb.textInput=_bb_6_7_textInput,bb.pillButtons=_bb_6_7_PlayBook_pillButtons,bb.labelControlContainers=_bb_6_7_PlayBook_labelControlContainers,bb.progress=_bb_progress,bb.roundPanel=_bb_5_6_7_roundPanel),!bb.device.isBB10||bb.device.isPlayBook||bb.device.isRipple||bb.device.is720x720||(blackberry.event.addEventListener("keyboardOpening",function(){bb.screen.currentScreen.actionBar&&bb.screen.currentScreen.actionBar.hide()}),blackberry.event.addEventListener("keyboardOpened",function(){bb.screen.currentScreen.actionBar&&bb.screen.focusedInput&&(bb.screen.focusedInput.container?bb.screen.focusedInput.container.scrollIntoView(!1):bb.screen.focusedInput.scrollIntoView(!1))}),blackberry.event.addEventListener("keyboardClosed",function(){bb.screen.currentScreen.actionBar&&bb.screen.currentScreen.actionBar.show()})),!bb.device.isBB10||bb.device.isPlayBook||bb.device.isRipple||blackberry.ui&&blackberry.ui.contextmenu&&(blackberry.ui.contextmenu.enabled=!0,blackberry.bbui&&blackberry.bbui.initContext({highlightColor:bb.options.highlightColor}))},doLoad:function(e){var t=e||document.body;bb.screen.apply(t.querySelectorAll("[data-bb-type=screen]")),bb.style(t),bb.screen.reAdjustHeight()},style:function(e){bb.scrollPanel&&bb.scrollPanel.apply(e.querySelectorAll("[data-bb-type=scroll-panel]")),bb.textInput&&bb.textInput.apply(e.querySelectorAll("input[type=text], [type=password], [type=tel], [type=url], [type=email], [type=number], [type=date], [type=time], [type=datetime], [type=month], [type=datetime-local], [type=color], [type=search]")),bb.dropdown&&bb.dropdown.apply(e.querySelectorAll("select")),bb.roundPanel&&bb.roundPanel.apply(e.querySelectorAll("[data-bb-type=round-panel]")),bb.imageList&&bb.imageList.apply(e.querySelectorAll("[data-bb-type=image-list]")),bb.grid&&bb.grid.apply(e.querySelectorAll("[data-bb-type=grid-layout]")),bb.bbmBubble&&bb.bbmBubble.apply(e.querySelectorAll("[data-bb-type=bbm-bubble]")),bb.pillButtons&&bb.pillButtons.apply(e.querySelectorAll("[data-bb-type=pill-buttons]")),bb.labelControlContainers&&bb.labelControlContainers.apply(e.querySelectorAll("[data-bb-type=label-control-container]")),bb.button&&bb.button.apply(e.querySelectorAll("[data-bb-type=button]")),bb.fileInput&&bb.fileInput.apply(e.querySelectorAll("input[type=file]")),bb.slider&&bb.slider.apply(e.querySelectorAll("input[type=range]")),bb.progress&&bb.progress.apply(e.querySelectorAll("progress")),bb.radio&&bb.radio.apply(e.querySelectorAll("input[type=radio]")),bb.activityIndicator&&bb.activityIndicator.apply(e.querySelectorAll("[data-bb-type=activity-indicator]")),bb.checkbox&&bb.checkbox.apply(e.querySelectorAll("input[type=checkbox]")),bb.toggle&&bb.toggle.apply(e.querySelectorAll("[data-bb-type=toggle]"))},getCurScreen:function(){return document.querySelector("[data-bb-type=screen]")},device:{isHiRes:!1,isBB5:!1,isBB6:!1,isBB7:!1,isBB10:!1,isPlayBook:!1,isRipple:!1,is1024x600:!1,is1280x768:!1,is720x720:!1,is1280x720:!1},options:{onbackkey:null,onscreenready:null,ondomready:null,controlsDark:!1,coloredTitleBar:!1,listsDark:!1,highlightColor:"#00A8DF",bb10ForPlayBook:!1},loadScreen:function(url,id,popping,guid,params,screenRecord){var xhr=new XMLHttpRequest,container=document.createElement("div"),_reduce=function(e,t,i){var n=i;return Array.prototype.forEach.apply(e,[function(e){n=t(n,e)}]),n},whereScript=function(e,t){return"SCRIPT"===t.nodeName&&e.push(t),_reduce(t.childNodes,whereScript,e)},i,scripts=[],newScriptTags=[];xhr.open("GET",url,!1),xhr.send(),container.setAttribute("id",guid),container.innerHTML=xhr.responseText,scripts=_reduce(container.childNodes,whereScript,[]),container.scriptIds=[],screenRecord&&(screenRecord.scripts=[]),scripts.forEach(function(script){var scriptTag=document.createElement("script"),type=script.getAttribute("type");if(!type||"text/javascript"==type.toLowerCase()){if(script.text)return eval(script.text),void 0;var scriptGuid=bb.guidGenerator();screenRecord?screenRecord.scripts.push({id:scriptGuid,onunload:script.getAttribute("onunload")}):container.scriptIds.push({id:scriptGuid,onunload:script.getAttribute("onunload")}),scriptTag.setAttribute("type","text/javascript"),scriptTag.setAttribute("src",script.getAttribute("src")),scriptTag.setAttribute("id",scriptGuid),newScriptTags.push(scriptTag),script.parentNode.removeChild(script)}}),container.getElementById=function(e,t){var i=null;if(t||(t=this),t.getAttribute("id")==e)return t;for(var n=0;t.childNodes.length>n;n++){var o=t.childNodes[n];if(1==o.nodeType&&(i=this.getElementById(e,o)))break}return i},bb.screen.scriptCounter=0,bb.screen.totalScripts=newScriptTags.length;for(var i=0;newScriptTags.length>i;i++)document.body.appendChild(newScriptTags[i]),newScriptTags[i].onload=function(){bb.screen.scriptCounter++,bb.screen.scriptCounter==bb.screen.totalScripts&&bb.initContainer(container,id,popping,params)};return 0===bb.screen.totalScripts&&setTimeout(function(){bb.initContainer(container,id,popping,params)},0),container},initContainer:function(e,t,i,n){bb.options.onscreenready&&bb.options.onscreenready(e,t,n),bb.doLoad(e),document.body.appendChild(e);var o,r,s,l=e.querySelectorAll("[data-bb-type=screen]"),a=null;if(l.length>0){if(l=l[0],i){var b,d=bb.screens[bb.screens.length-1].container;o=d.querySelectorAll("[data-bb-type=screen]")[0],b=o.hasAttribute("data-bb-effect")?o.getAttribute("data-bb-effect"):void 0,b&&(l.style["z-index"]="-100","fade"==b.toLowerCase()?o.setAttribute("data-bb-effect","fade-out"):"slide-left"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-right"):"slide-right"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-left"):"slide-up"==b.toLowerCase()?o.setAttribute("data-bb-effect","slide-out-down"):"slide-down"==b.toLowerCase()&&o.setAttribute("data-bb-effect","slide-out-up"))}else o=l;if(o.popping=i,o.hasAttribute("data-bb-effect")&&!bb.device.isBB5&&!bb.device.isBB6&&(r=o.getAttribute("data-bb-effect"))){if(r=r.toLowerCase(),"fade"==r)a=bb.screen.fadeIn;else if("fade-out"==r)a=bb.screen.fadeOut;else if(!bb.device.isBB7)switch(r){case"slide-left":a=bb.screen.slideLeft;break;case"slide-out-left":a=bb.screen.slideOutLeft;break;case"slide-right":a=bb.screen.slideRight;break;case"slide-out-right":a=bb.screen.slideOutRight;break;case"slide-up":a=bb.screen.slideUp;break;case"slide-out-up":a=bb.screen.slideOutUp;break;case"slide-down":a=bb.screen.slideDown;break;case"slide-out-down":a=bb.screen.slideOutDown}o.style.display="inline",a&&(s=document.createElement("div"),o.overlay=s,s.setAttribute("class","bb-transition-overlay"),document.body.appendChild(s),bb.screen.animating=!0,o.doEndAnimation=function(){var t=this.style;bb.screen.animating=!1,document.body.removeChild(this.overlay),this.overlay=null,bb.screens.length>1?this.popping?(this.style.display="none",this.parentNode.parentNode.removeChild(this.parentNode),bb.screens.pop(),l.style["z-index"]="",bb.screens[bb.screens.length-1].container=e):(bb.removePreviousScreenFromDom(),t.left="",t.right="",t.top="",t.bottom="",t.width="",t.height="",t["-webkit-animation-name"]="",t["-webkit-animation-duration"]="",t["-webkit-animation-timing-function"]="",t["-webkit-transform"]=""):1>=bb.screens.length&&(t.left="",t.right="",t.top="",t.bottom="",t.width="",t.height="",t["-webkit-animation-name"]="",t["-webkit-animation-duration"]="",t["-webkit-animation-timing-function"]="",t["-webkit-transform"]=""),this.removeEventListener("webkitAnimationEnd",this.doEndAnimation),bb.createScreenScroller(l)},o.doEndAnimation=o.doEndAnimation.bind(o),o.addEventListener("webkitAnimationEnd",o.doEndAnimation),a.call(this,o))}}if(bb.options.ondomready?(bb.domready.container=e,bb.domready.id=t,bb.domready.params=n,setTimeout(bb.domready.fire,1)):setTimeout(bb.domready.fireEventsOnly,1),!a){if(i){if(i){l.style["z-index"]="";var c=bb.screens[bb.screens.length-1].container;c.parentNode.removeChild(c),bb.screens.pop(),bb.screens[bb.screens.length-1].container=e}}else(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7)&&bb.screens.length>0?bb.removePreviousScreenFromDom():bb.screens.length>1&&bb.removePreviousScreenFromDom();bb.createScreenScroller(l)}},domready:{container:null,id:null,params:null,fire:function(){if(bb.screen.animating)return setTimeout(bb.domready.fire,250),void 0;var e=document.createEvent("Events");e.initEvent("bbuidomready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuilistready",!0,!0),document.dispatchEvent(e),bb.options.ondomready(bb.domready.container,bb.domready.id,bb.domready.params),bb.domready.container=null,bb.domready.id=null,bb.domready.params=null,e=document.createEvent("Events"),e.initEvent("bbuidomprocessed",!0,!0),document.dispatchEvent(e)},fireEventsOnly:function(){if(bb.screen.animating)return setTimeout(bb.domready.fireEventsOnly,250),void 0;var e=document.createEvent("Events");e.initEvent("bbuidomready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuilistready",!0,!0),document.dispatchEvent(e),e=document.createEvent("Events"),e.initEvent("bbuidomprocessed",!0,!0),document.dispatchEvent(e)}},createScreenScroller:function(e){var t=e.bbUIscrollWrapper;if(t)if(bb.device.isPlayBook){var i={hideScrollbar:!0,fadeScrollbar:!0,onBeforeScrollStart:function(e){var t=e.target;if(!t.parentNode||"bb-bb10-dropdown-items"!=t.parentNode.getAttribute("class")){for(;1!=t.nodeType;)t=t.parentNode;if("SELECT"!=t.tagName&&"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName&&"AUDIO"!=t.tagName&&"VIDEO"!=t.tagName){e.preventDefault();var i=document.activeElement;i&&("SELECT"==i.tagName||"INPUT"==i.tagName||"TEXTAREA"==i.tagName||"AUDIO"==i.tagName||"VIDEO"==i.tagName)&&i.blur()}}},onScrollEnd:function(){evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)},onScrollMove:function(t){e.onscroll&&e.onscroll(t),evt=document.createEvent("Events"),evt.initEvent("bbuiscrolling",!0,!0),document.dispatchEvent(evt)}};bb.scroller=new iScroll(t,i)}else bb.device.isBB10&&(bb.scroller=null,t.style["-webkit-overflow-scrolling"]="-blackberry-touch",t.onscroll=function(t){e.onscroll&&e.onscroll(t)})},clearScrollers:function(){for(var e,t=bb.dropdownScrollers-1;t>-1;t--)e=bb.dropdownScrollers[t],e.destroy(),e=null,bb.dropdownScrollers.pop()},removeTopMostScreenFromDom:function(){var e=bb.screens.length,t=document.getElementById(bb.screens[e-1].guid);document.body.removeChild(t)},removePreviousScreenFromDom:function(){var e,t,i=bb.screens.length;1!=i&&(t=i>1?2:1,e=document.getElementById(bb.screens[i-t].guid),e&&document.body.removeChild(e))},pushScreen:function(e,t,i){bb.removeLoadedScripts(),bb.menuBar.clearMenu();var n,o=bb.screens.length;o>0&&(bb.screen.overlay=null,bb.screen.tabOverlay=null,bb.clearScrollers(),bb.screen.contextMenu&&(bb.screen.contextMenu=null),(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7)&&(n=document.getElementById(bb.screens[o-1].guid),n.style.display="none",window.scroll(0,0)));var r=bb.guidGenerator(),s=bb.loadScreen(e,t,!1,r,i);bb.screens.push({id:t,url:e,scripts:s.scriptIds,container:s,guid:r,params:i})},popScreen:function(){var e,t,i=bb.screens.length;if(i>1){for(bb.removeLoadedScripts(),bb.clearScrollers(),bb.menuBar.clearMenu(),bb.screen.overlay=null,bb.screen.tabOverlay=null,e=0;bb.windowListeners.length>e;e++)t=bb.windowListeners[e],window.removeEventListener(t.name,t.eventHandler,!1);for(bb.windowListners=[],e=0;bb.documentListeners.length>e;e++)t=bb.documentListeners[e],document.removeEventListener(t.name,t.eventHandler,!1);bb.documentListeners=[];var n=bb.screens[i-2];bb.loadScreen(n.url,n.id,!0,n.guid,n.params,n),(bb.device.isBB5||bb.device.isBB6||bb.device.isBB7)&&window.scroll(0,0)}else blackberry&&blackberry.app.exit()},removeLoadedScripts:function(){var numItems=bb.screens.length;if(numItems>0)for(var currentStackItem=bb.screens[numItems-1],current=document.getElementById(currentStackItem.guid),i=0;currentStackItem.scripts.length>i;i++){var bbScript=currentStackItem.scripts[i],scriptTag=document.getElementById(bbScript.id);bbScript.onunload&&eval(bbScript.onunload),scriptTag&&document.body.removeChild(scriptTag)}},innerHeight:function(){return bb.device.isPlayBook?window.orientation?0==window.orientation||180==window.orientation?600:-90==window.orientation||90==window.orientation?1024:void 0:window.innerHeight:window.innerHeight},innerWidth:function(){return bb.device.isPlayBook?window.orientation?0==window.orientation||180==window.orientation?1024:-90==window.orientation||90==window.orientation?600:void 0:window.innerWidth:window.innerWidth},getOrientation:function(){if(bb.device.is720x720)return"portrait";if(bb.device.isPlayBook){if(!window.orientation)return window.innerWidth>window.innerHeight?"landscape":"portrait";if(0==window.orientation||180==window.orientation)return"landscape";if(-90==window.orientation||90==window.orientation)return"portrait"}else{if(void 0==window.orientation)return window.innerWidth>window.innerHeight?"landscape":"portrait";if(0==window.orientation||180==window.orientation)return"portrait";if(-90==window.orientation||90==window.orientation)return"landscape"}},cutHex:function(e){return"#"==e.charAt(0)?e.substring(1,7):e},guidGenerator:function(){var e=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()+e()+e()},refresh:function(){bb.scroller&&bb.scroller.refresh()},isScrolledIntoView:function(e){var t=0,i=e;if(i.offsetParent)do t+=i.offsetTop,i.scrollTop&&(t-=i.scrollTop),bb.device.isPlayBook&&(i.scroller?t+=i.scroller.y:i.bbUIscrollWrapper&&(t+=bb.scroller.y));while(i=i.offsetParent);return bb.innerHeight()>t}},Function.prototype.bind=function(e){var t=this;return function(){return t.apply(e,arguments)}},bb.actionBar={apply:function(e,t){var i,n,o,r,s,l,a,b=e.querySelectorAll("[data-bb-type=action]"),d=[],c=[],h=[],u=[],p=e,m="1280x768-1280x720",g=bb.getOrientation();for(bb.device.is1024x600?m="1024x600":bb.device.is1280x768||bb.device.is1280x720?m="1280x768-1280x720":bb.device.is720x720&&(m="720x720"),e.res=m,e.isVisible=!0,e.setAttribute("class","bb-bb10-action-bar-"+m+" bb-bb10-action-bar-"+g+"-"+m+" bb-bb10-action-bar-dark"),e.mainBarTabs=h,e.mainBarButtons=d,e.overflowButtons=c,e.overflowTabs=u,a=0;b.length>a;a++)i=b[a],i.hasAttribute("data-bb-style")&&(r=i.getAttribute("data-bb-style").toLowerCase(),"button"==r?i.hasAttribute("data-bb-overflow")&&"true"==i.getAttribute("data-bb-overflow").toLowerCase()?c.push(i):d.push(i):i.hasAttribute("data-bb-overflow")&&"true"==i.getAttribute("data-bb-overflow").toLowerCase()?u.push(i):h.push(i));if(e.hasAttribute("data-bb-back-caption")&&0==e.querySelectorAll("[data-bb-style=tab]").length){var v,y,f,w;s=document.createElement("div"),s.setAttribute("class","bb-bb10-action-bar-back-button-"+m+" bb-bb10-action-bar-back-button-"+m+"-dark bb-bb10-action-bar-back-button-"+g+"-"+m),s.onclick=function(){window.setTimeout(bb.popScreen,0)},e.backBtn=s,v=document.createElement("div"),v.setAttribute("class","bb-bb10-action-bar-back-chevron-"+m+"-dark"),s.appendChild(v),y=document.createElement("div"),y.setAttribute("class","bb-bb10-action-bar-back-text-"+m+" bb-bb10-action-bar-back-text-"+g+"-"+m),y.innerHTML=e.getAttribute("data-bb-back-caption"),s.backCaption=y,s.appendChild(y),w=document.createElement("div"),w.setAttribute("class","bb-bb10-action-bar-back-button-highlight"),w.style.position="absolute",w.style.width=bb.device.is1024x600?"4px":"8px",w.style["background-color"]="transparent",s.updateHighlightDimensions=function(e){bb.device.is1024x600?(w.style.height="portrait"==e?"57px":"57px",w.style.top="8px"):bb.device.is1280x768||bb.device.is1280x720?(w.style.height="portrait"==e?"110px":"70px",w.style.top="15px"):bb.device.is720x720?(w.style.height="78px",w.style.top="15px"):(w.style.height="portrait"==e?"110px":"110px",w.style.top="15px")},s.updateHighlightDimensions=s.updateHighlightDimensions.bind(s),s.backHighlight=w,s.updateHighlightDimensions(g),s.appendChild(w),s.ontouchstart=function(){this.backHighlight.style["background-color"]=bb.options.highlightColor},s.ontouchend=function(){this.backHighlight.style["background-color"]="transparent"},f=document.createElement("div"),f.setAttribute("class","bb-bb10-action-bar-back-slash-"+m+"-dark bb-bb10-action-bar-back-slash-"+g+"-"+m),s.backslash=f;var E=document.createElement("table"),x=document.createElement("tr"),k=document.createElement("td");for(e.appendChild(E),E.appendChild(x),E.setAttribute("class","bb-bb10-action-bar-table"),k.style.width=bb.device.is1024x600?bb.actionBar.getBackBtnWidth(s)-16+"px":bb.actionBar.getBackBtnWidth(s)-33+"px",x.appendChild(k),s.innerChevron=k,k.appendChild(s),k=document.createElement("td"),k.style.width=bb.device.is1024x600?"16px":"33px",f.style["background-color"]=bb.options.shades.darkOutline,x.appendChild(k),k.appendChild(f),k=document.createElement("td"),k.style.width="100%",x.appendChild(k),p=k,a=0;b.length>a;a++)i=b[a],k.appendChild(i)}if(u.length>0&&(e.tabOverflowMenu=bb.tabOverflow.create(t),e.tabOverflowMenu.actionBar=e,i=document.createElement("div"),i.actionBar=e,i.tabOverflowMenu=e.tabOverflowMenu,i.setAttribute("data-bb-type","action"),i.setAttribute("data-bb-style","tab"),i.setAttribute("data-bb-img","overflow"),i.onclick=function(){this.tabOverflowMenu.show()},e.tabOverflowBtn=i,p.insertBefore(i,p.firstChild)),c.length>0&&(e.menu=bb.actionOverflow.create(t),e.appendChild(e.menu),i=document.createElement("div"),i.menu=e.menu,i.menu.actionBar=e,i.setAttribute("data-bb-type","action"),i.setAttribute("data-bb-style","button"),i.setAttribute("data-bb-img","overflow"),i.onclick=function(){this.menu.show()},e.actionOverflowBtn=i,p.appendChild(i)),e.getUsableWidth=function(){return bb.innerWidth()-bb.actionBar.getBackBtnWidth(this.backBtn)-bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)},e.getUsableWidth=e.getUsableWidth.bind(e),e.switchOrientationCSS=function(e){if(e){var t=bb.getOrientation();e="portrait"==t?e.replace("landscape","portrait"):e.replace("portrait","landscape")}return e},e.switchOrientationCSS=e.switchOrientationCSS.bind(e),e.reLayoutActionBar=function(){var e,t,i,n,o="button",r=0,s=5,l=0,a=0,b=0,d=bb.getOrientation();for(this.actionOverflowBtn&&s--,this.backBtn&&s--,this.tabOverflowBtn&&s--,e=0;this.mainBarTabs.length>e&&l!=s;e++)i=this.mainBarTabs[e],1==i.visible&&l++;for(e=0;this.mainBarButtons.length>e&&l!=s;e++)t=this.mainBarButtons[e],1==t.visible&&l++;for(l=0==l?1:l,r=Math.floor(this.getUsableWidth()/l),n=this.getAttribute("class"),n=this.switchOrientationCSS(n),this.setAttribute("class",n),this.isVisible&&(bb.screen.currentScreen.outerScrollArea.style.bottom=bb.screen.getActionBarHeight()+"px",bb.scroller&&bb.scroller.refresh()),this.backBtn&&(n=this.backBtn.getAttribute("class"),n=this.switchOrientationCSS(n),this.backBtn.setAttribute("class",n),this.backBtn.updateHighlightDimensions(d),n=this.backBtn.backCaption.getAttribute("class"),n=this.switchOrientationCSS(n),this.backBtn.backCaption.setAttribute("class",n),n=this.backBtn.backslash.getAttribute("class"),n=this.switchOrientationCSS(n),this.backBtn.backslash.setAttribute("class",n),this.backBtn.innerChevron.style.width=bb.device.is1024x600?bb.actionBar.getBackBtnWidth(this.backBtn)-16+"px":bb.actionBar.getBackBtnWidth(this.backBtn)-33+"px"),l=0,b=r-2,e=0;this.mainBarTabs.length>e;e++)i=this.mainBarTabs[e],s>l&&1==i.visible?(a+=b,i.style.width=b+"px",i.normal=this.switchOrientationCSS(i.normal),i.highlight=this.switchOrientationCSS(i.highlight),n=i.getAttribute("class"),n=this.switchOrientationCSS(n),i.setAttribute("class",n),n=i.display.getAttribute("class"),n=this.switchOrientationCSS(n),i.display.setAttribute("class",n),o="tab",l++):(i.style.display="none",i.visible=!1);for(b=r-1,e=0;this.mainBarButtons.length>e;e++)t=this.mainBarButtons[e],s>l&&1==t.visible?(a+=b,t.style.width=b+"px",t.highlight.style.width=.6*r+"px",t.highlight.style["margin-left"]=.2*r+"px",t.normal="tab"==o?"bb-bb10-action-bar-action-"+t.res+" bb-bb10-action-bar-action-"+d+"-"+t.res+" bb-bb10-action-bar-button-dark bb-bb10-action-bar-button-tab-left-"+t.res+"-dark":"bb-bb10-action-bar-action-"+t.res+" bb-bb10-action-bar-action-"+d+"-"+t.res+" bb-bb10-action-bar-button-dark",t.setAttribute("class",t.normal),t.normal=this.switchOrientationCSS(t.normal),n=t.getAttribute("class"),n=this.switchOrientationCSS(n),t.setAttribute("class",n),o="button",l++):(t.style.display="none",t.visible=!1);this.actionOverflowBtn&&(this.actionOverflowBtn.normal="tab"==o?"bb-bb10-action-bar-action-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-action-"+d+"-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-button-dark bb-bb10-action-bar-button-tab-left-"+this.actionOverflowBtn.res+"-dark":"bb-bb10-action-bar-action-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-action-"+d+"-"+this.actionOverflowBtn.res+" bb-bb10-action-bar-button-dark",this.actionOverflowBtn.style.width=bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)-1+"px",this.actionOverflowBtn.highlight.style.width=.6*bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)+"px",this.actionOverflowBtn.highlight.style["margin-left"]=.2*bb.actionBar.getActionOverflowBtnWidth(this.actionOverflowBtn)+"px",this.actionOverflowBtn.style.float="right",this.actionOverflowBtn.setAttribute("class",this.actionOverflowBtn.normal),this.actionOverflowBtn.normal=this.switchOrientationCSS(this.actionOverflowBtn.normal),n=this.actionOverflowBtn.getAttribute("class"),n=this.switchOrientationCSS(n),this.actionOverflowBtn.setAttribute("class",n),n=this.actionOverflowBtn.icon.getAttribute("class"),n=this.switchOrientationCSS(n),this.actionOverflowBtn.icon.setAttribute("class",n)),this.tabOverflowBtn&&(this.tabOverflowBtn.style.width=bb.actionBar.getTabOverflowBtnWidth(this.tabOverflowBtn)-1+"px",this.tabOverflowBtn.normal=this.switchOrientationCSS(this.tabOverflowBtn.normal),this.tabOverflowBtn.highlight=this.switchOrientationCSS(this.tabOverflowBtn.highlight),n=this.tabOverflowBtn.getAttribute("class"),n=this.switchOrientationCSS(n),this.tabOverflowBtn.setAttribute("class",n),n=this.tabOverflowBtn.tabHighlight.getAttribute("class"),n=this.switchOrientationCSS(n),this.tabOverflowBtn.tabHighlight.setAttribute("class",n),n=this.tabOverflowBtn.display.getAttribute("class"),n=this.switchOrientationCSS(n),this.tabOverflowBtn.display.setAttribute("class",n),this.tabOverflowBtn.icon.normal=this.switchOrientationCSS(this.tabOverflowBtn.icon.normal),n=this.tabOverflowBtn.icon.getAttribute("class"),n=this.switchOrientationCSS(n),this.tabOverflowBtn.icon.setAttribute("class",n))},e.reLayoutActionBar=e.reLayoutActionBar.bind(e),window.addEventListener("orientationchange",e.reLayoutActionBar,!1),bb.windowListeners.push({name:"orientationchange",eventHandler:e.reLayoutActionBar}),e.setBackCaption=function(e){this.setAttribute("data-bb-back-caption",e),y.innerHTML=e},e.setBackCaption=e.setBackCaption.bind(e),e.setSelectedTab=function(e){"tab"==e.getAttribute("data-bb-style")&&(bb.actionBar.highlightAction(e),e.onclick&&e.onclick())},e.setSelectedTab=e.setSelectedTab.bind(e),e.hide=function(){this.isVisible&&(this.style.display="none",bb.screen.currentScreen.outerScrollArea.style.bottom="0px",this.isVisible=!1,bb.scroller&&bb.scroller.refresh())},e.hide=e.hide.bind(e),e.show=function(){this.isVisible||(this.style.display="",bb.screen.currentScreen.outerScrollArea.style.bottom=bb.screen.getActionBarHeight()+"px",this.isVisible=!0,bb.scroller&&bb.scroller.refresh())},e.show=e.show.bind(e),u.length>0){var C;for(a=0;h.length>a;a++)i=h[a],"overflow"!=i.getAttribute("data-bb-img")&&(C=i.cloneNode(!0),C.visibleTab=i,C.res=m,C.actionBar=e,e.tabOverflowMenu.add(C));for(a=0;u.length>a;a++)i=u[a],i.res=m,i.actionBar=e,e.tabOverflowMenu.add(i)}for(a=0;c.length>a;a++)i=c[a],i.res=m,e.menu.add(i);var A;for(a=0;h.length>a;a++)A=h[a],A.res=m,n=A.innerHTML,A.actionBar=e,A.visible=!0,A.innerHTML="",A.normal="bb-bb10-action-bar-action-"+m+" bb-bb10-action-bar-action-"+g+"-"+m+" bb-bb10-action-bar-tab-dark bb-bb10-action-bar-tab-normal-dark",A.highlight=A.normal+" bb-bb10-action-bar-tab-selected-dark",A.setAttribute("class",A.normal),A.visible=!0,A.hasAttribute("data-bb-visible")&&"false"==A.getAttribute("data-bb-visible").toLowerCase()&&(A.visible=!1),l=document.createElement("img"),l.setAttribute("class","bb-bb10-action-bar-icon-"+m),l.setAttribute("src",A.getAttribute("data-bb-img")),A.icon=l,A.appendChild(l),o=document.createElement("div"),o.setAttribute("class","bb-bb10-action-bar-action-display-"+m+" bb-bb10-action-bar-action-display-"+g+"-"+m),o.innerHTML=n,A.display=o,A.appendChild(o),A.hasAttribute("data-bb-selected")&&"true"==A.getAttribute("data-bb-selected").toLowerCase()&&bb.actionBar.highlightAction(A),A.addEventListener("click",function(){bb.actionBar.highlightAction(this)},!1),A.setCaption=function(e){if(this.display.innerHTML=e,this.actionBar.tabOverflowMenu){var t,i,n=this.actionBar.tabOverflowMenu.actions;for(t=0;n.length>t;t++)i=n[t],i.visibleTab==this&&i.setCaption(e)}},A.setCaption=A.setCaption.bind(A),A.getCaption=function(){return this.display.innerHTML},A.getCaption=A.getCaption.bind(A),A.setImage=function(e){if(this.icon.setAttribute("src",e),this.actionBar.tabOverflowMenu){var t,i,n=this.actionBar.tabOverflowMenu.actions;for(t=0;n.length>t;t++)i=n[t],i.visibleTab==this&&i.setImage(e)}},A.setImage=A.setImage.bind(A),A.getImage=function(){return this.icon.getAttribute("src")
